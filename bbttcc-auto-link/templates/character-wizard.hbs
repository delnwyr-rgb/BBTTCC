<section class="bbttcc-character-wizard">
  <header class="bbttcc-wizard-header">
    <h1 class="bbttcc-wizard-title">BBTTCC Character Wizard</h1>
    <p class="bbttcc-wizard-subtitle">
      Guided setup for a new hero of the Hex — link them to a Faction, wire in D&amp;D 5E options,
      and assign BBTTCC identity tags.
    </p>
  </header>

  <form class="bbttcc-wizard-form">
    <div class="bbttcc-wizard-grid">
      <!-- BASICS -->
      <section class="bbttcc-wizard-card">
        <h2 class="bbttcc-wizard-card-title">Basics</h2>

        <div class="bbttcc-field">
          <label for="bbttcc-wizard-name">Name</label>
          <input
            id="bbttcc-wizard-name"
            type="text"
            name="name"
            value="{{defaults.name}}"
            placeholder="Character name"
          />
        </div>

        <div class="bbttcc-field">
          <label for="bbttcc-wizard-faction">Faction</label>
          <select id="bbttcc-wizard-faction" name="factionId">
            <option value="">(None)</option>
            {{#each factions}}
              <option value="{{id}}">{{name}}</option>
            {{/each}}
          </select>
          <p class="bbttcc-hint">
            Links the character to a Faction so roster contributions and OP impact appear correctly.
          </p>
        </div>
      </section>

      <!-- D&D5E CHOICES -->
      <section class="bbttcc-wizard-card">
        <h2 class="bbttcc-wizard-card-title">D&amp;D 5E Choices</h2>

        <div class="bbttcc-field">
          <label for="bbttcc-wizard-species">Species (paste UUID)</label>
          <input
            id="bbttcc-wizard-species"
            type="text"
            name="speciesUuid"
            value="{{defaults.speciesUuid}}"
            placeholder="Compendium.dnd-players-handbook.origins.Item.XXXXX or world UUID"
          />
        </div>

        <div class="bbttcc-field">
          <label for="bbttcc-wizard-class">Class (paste UUID)</label>
          <input
            id="bbttcc-wizard-class"
            type="text"
            name="classUuid"
            value="{{defaults.classUuid}}"
            placeholder="Compendium.dnd-players-handbook.classes.Item.YYYYY or world UUID"
          />
        </div>

        <p class="bbttcc-hint">
          Tip: Right-click a compendium entry and choose “Copy Document UUID”, then paste here.
        </p>
      </section>

      <!-- BBTTCC OPTIONS -->
      <section class="bbttcc-wizard-card bbttcc-wizard-card-wide">
        <h2 class="bbttcc-wizard-card-title">BBTTCC Options</h2>

        <div class="bbttcc-wizard-options-grid">
          <div class="bbttcc-field">
            <label for="bbttcc-wizard-archetype">Archetype</label>
            <select id="bbttcc-wizard-archetype" name="archetypeId">
              <option value="">(None)</option>
              {{#each defaults.lists.archetype}}
                <option value="{{id}}">{{name}}</option>
              {{/each}}
            </select>
          </div>

          <div class="bbttcc-field">
            <label for="bbttcc-wizard-crew">Crew Type</label>
            <select id="bbttcc-wizard-crew" name="crewId">
              <option value="">(None)</option>
              {{#each defaults.lists.crew}}
                <option value="{{id}}">{{name}}</option>
              {{/each}}
            </select>
          </div>

          <div class="bbttcc-field">
            <label for="bbttcc-wizard-sephirot">Sephirotic Alignment</label>
            <select id="bbttcc-wizard-sephirot" name="sephirotId">
              <option value="">(None)</option>
              {{#each defaults.lists.sephirot}}
                <option value="{{id}}">{{name}}</option>
              {{/each}}
            </select>
          </div>

          <div class="bbttcc-field">
            <label for="bbttcc-wizard-political">Political Affiliation</label>
            <select id="bbttcc-wizard-political" name="politicalId">
              <option value="">(None)</option>
              {{#each defaults.lists.political}}
                <option value="{{id}}">{{name}}</option>
              {{/each}}
            </select>
          </div>

          <div class="bbttcc-field">
            <label for="bbttcc-wizard-occult">Occult Association</label>
            <select id="bbttcc-wizard-occult" name="occultId">
              <option value="">(None)</option>
              {{#each defaults.lists.occult}}
                <option value="{{id}}">{{name}}</option>
              {{/each}}
            </select>
          </div>

          <div class="bbttcc-field">
            <label for="bbttcc-wizard-enlight">Enlightenment Level</label>
            <select id="bbttcc-wizard-enlight" name="enlightId">
              <option value="">(None)</option>
              {{#each defaults.lists.enlight}}
                <option value="{{id}}">{{name}}</option>
              {{/each}}
            </select>
          </div>
        </div>

        <p class="bbttcc-hint">
          These pull directly from your BBTTCC packs. Their item flags already contain the official OP bonuses,
          so Faction rosters and OP summaries will reflect selections automatically.
        </p>
      </section>
    </div>

    <footer class="bbttcc-wizard-footer">
      <button type="button" data-action="create" class="bbttcc-wizard-create">
        <i class="fas fa-magic"></i>
        Create Character
      </button>
    </footer>
  </form>
</section>
